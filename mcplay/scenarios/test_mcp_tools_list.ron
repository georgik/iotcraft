// Test scenario to verify MCP tools list and check if get_mqtt_status is registered
Scenario(
    name: "test_mcp_tools_list",
    description: "Simple test to list all available MCP tools and verify get_mqtt_status registration",
    version: "1.0",
    
    // Minimal infrastructure for this basic test
    infrastructure: InfrastructureConfig(
        mqtt_server: MqttServerConfig(
            required: false, // Not needed for this basic test
            port: 1883,
            config_file: None,
            options: None,
        ),
        mqtt_observer: None, // Not needed for this basic test
        mcp_server: None,
        services: None,
    ),
    
    // Single client for tools testing
    clients: [
        ClientConfig(
            id: "tools_test_client",
            player_id: "tools_test_client", 
            mcp_port: 3001,
            client_type: "desktop",
            name: Some("Tools Test Client"),
            config: None,
        ),
    ],
    
    steps: [
        Step(
            name: "mcp_initialize",
            description: "Initialize MCP connection",
            client: "tools_test_client",
            action: (
                type: "mcp_call",
                tool: "initialize",
                arguments: {
                    "protocolVersion": "2024-11-05",
                    "capabilities": { "tools": {} },
                    "clientInfo": {
                        "name": "tools-test-client",
                        "version": "1.0.0"
                    }
                },
            ),
            wait_before: 2000,
            wait_after: 500,
            timeout: 10000,
            success_condition: Some((
                type: "mcp_response",
                expected: "success",
            )),
            depends_on: [],
            timing: None,
            conditions: None,
            expectations: None,
        ),
        
        Step(
            name: "list_mcp_tools",
            description: "List all available MCP tools to check if get_mqtt_status is registered",
            client: "tools_test_client",
            action: (
                type: "mcp_call",
                tool: "tools/list",
                arguments: {},
            ),
            wait_before: 500,
            wait_after: 500,
            timeout: 10000,
            success_condition: Some((
                type: "mcp_response",
                expected: "success",
            )),
            depends_on: ["mcp_initialize"],
            timing: None,
            conditions: None,
            expectations: None,
        ),
        
        Step(
            name: "test_get_mqtt_status",
            description: "Attempt to call get_mqtt_status to see if it's now recognized",
            client: "tools_test_client",
            action: (
                type: "mcp_call",
                tool: "get_mqtt_status",
                arguments: {},
            ),
            wait_before: 500,
            wait_after: 500,
            timeout: 10000,
            success_condition: Some((
                type: "mcp_response",
                expected: "success",
            )),
            depends_on: ["list_mcp_tools"],
            timing: None,
            conditions: None,
            expectations: None,
        ),
    ],
)
